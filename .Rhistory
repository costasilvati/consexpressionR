label = "Select a table count file",
multiple = FALSE,
accept = c("text/csv/tsv",
"text/comma-separated-values,text/plain",".csv")),
helpText("Note: while the data view will show only the specified", "number of replics, the summary will still be based","on the full dataset."),
)
),
shiny::div( style= "text-align: center;",
shiny::actionButton(inputId = "go",
label = "Load count dataset",
width = '51%',
class= "btn-primary" ),
)
),
),
column(width = 1)
),
shiny::fluidRow(
shiny::column(width = 12,
shiny::h2("Details of data set load", style = "text-align: center;"),
shiny::wellPanel(
DT::dataTableOutput("sample")
)
),
),
shiny::fluidRow(
shiny::column(width = 5,
shiny::h2("Expression analysis parameters", style="text-aligner:center;"),
shiny::p("The consensus methodology of this tool was tested with the parameters shown below."),
shiny::wellPanel(
shiny::h3("DESEq2", style="color: #5e63b6;"),
shiny::selectInput(inputId = "fitTypeInp",
label = "fitType",
choices = c("parametric"="parametric", "local"="local", "mean"="mean", "glmGamPoi"="glmGamPoi"),
selected = "local",
width = NULL
), #selectInput
shiny::fileInput(inputId = "kallistoDirRuns",
label = "Select kallisto root output",
multiple = FALSE,
accept = NULL,
multiple = FALSE),
helpText("Note: select any.tsv file (in default mode of kallisto output)"),
shiny::verbatimTextOutput("selectedFolder")
# shiny::fileInput("kallistoDirRuns", "Directory that contais kallisto runs.",)
# pathDirRuns = ".",
# pathReportFile = "report_txi.txt",
# subDirRuns = "dir_runs",
# fileKallisto = "abundance.tsv"
# shiny::helpText("Use the default (selected) settings of the expression analysis methods, or configure manually")
) #wellPanel
) #column(width = 5,
), # fluidRow
) # fluidRow
) #fluidPage
# Define server logic required to draw a histogram
server <- function(input, output) {
options(shiny.maxRequestSize=30*1024^2)
datasetCount <- eventReactive(input$go, {
inFile <- input$tableCountInp
readCountFile(inFile$datapath, input$sepCharcterInp)
})
output$sample <- DT::renderDataTable({
DT::datatable(datasetCount())
})
# Cria o objeto de diretório
output$selectedFolder <- renderText({
if (!is.null(input$folderInput)) {
paste("Selected folder:", input$folderInput$name)
} else {
"No folder selected."
}
})
}
# Run the application
shiny::shinyApp(ui = ui, server = server)
}
runConsexpressionTestes()
# library(shiny)
# library(shinyFiles)
# library(fs)
runConsexpressionTestes <- function(){
ui <- shiny::fluidPage(
tags$head(
tags$script(
HTML('
$(document).on("shiny:inputchanged", function(event) {
var inputId = event.name;
var file = event.value;
if (inputId === "kallistoDirRuns") {
var fileList = file.files;
if (fileList.length > 0 && !fileList[0].webkitRelativePath) {
alert("Please, select a folder (directory)!");
$("#" + inputId).val(null);
}
}
});
')
)
),
h1("consexpression", span("R", style = "font-weight: 300"),
style = "color: #fff; text-align: center;
background-color:#27296d;
padding: 5%;
margin-bottom: 2%;"),
shiny::fluidRow(
shiny::h2("Configure Experiment", style = "text-align: center;"),
shiny::fluidRow(
shiny::column(width = 1,
),
shiny::column(width = 10,
shiny::wellPanel(shiny::h3("Experiment Design", style="color: #5e63b6;"),
shiny::fluidRow(
shiny::column(width = 6,
shiny::textInput(inputId = "experimentNameInp",
label="Experiment Name",
value="genericExperiment",
placeholder = "genericExperiment"),
),
shiny::column(width = 6,
shiny::numericInput(inputId = "numberReplicsInp",
label="Number of Replics",
value= 1,
min = 1,),
),
shiny::p(shiny::helpText(
"Note: This tool expect the same number of replics in each group of treatment."
)),
),
shiny::textInput(inputId ="groupNameInp",
label="Treatment Names",
placeholder ="Treat1, Treat2"),
shiny::helpText("Note: Comma separeted list by sample treatment names."),
shiny::h3("Table count file", style="color: #5e63b6;"),
# Input: Selector for choosing dataset ----
shiny::fluidRow(
shiny::column(width = 6,
shiny::selectInput(inputId = "sepCharcterInp",
label = "Choose a separator:",
choices = c("Comma-separated"=",","TAB" = "\t")),
),
shiny::column(width = 6,
shiny::fileInput(inputId = "tableCountInp",
label = "Select a table count file",
multiple = FALSE,
accept = c("text/csv/tsv",
"text/comma-separated-values,text/plain",".csv")),
helpText("Note: while the data view will show only the specified", "number of replics, the summary will still be based","on the full dataset."),
)
),
shiny::div( style= "text-align: center;",
shiny::actionButton(inputId = "go",
label = "Load count dataset",
width = '51%',
class= "btn-primary" ),
)
),
),
column(width = 1)
),
shiny::fluidRow(
shiny::column(width = 12,
shiny::h2("Details of data set load", style = "text-align: center;"),
shiny::wellPanel(
DT::dataTableOutput("sample")
)
),
),
shiny::fluidRow(
shiny::column(width = 5,
shiny::h2("Expression analysis parameters", style="text-aligner:center;"),
shiny::p("The consensus methodology of this tool was tested with the parameters shown below."),
shiny::wellPanel(
shiny::h3("DESEq2", style="color: #5e63b6;"),
shiny::selectInput(inputId = "fitTypeInp",
label = "fitType",
choices = c("parametric"="parametric", "local"="local", "mean"="mean", "glmGamPoi"="glmGamPoi"),
selected = "local",
width = NULL
), #selectInput
shiny::fileInput(inputId = "kallistoDirRuns",
label = "Select kallisto root output",
multiple = FALSE,
accept = NULL),
helpText("Note: select any.tsv file (in default mode of kallisto output)"),
shiny::verbatimTextOutput("selectedFolder")
# shiny::fileInput("kallistoDirRuns", "Directory that contais kallisto runs.",)
# pathDirRuns = ".",
# pathReportFile = "report_txi.txt",
# subDirRuns = "dir_runs",
# fileKallisto = "abundance.tsv"
# shiny::helpText("Use the default (selected) settings of the expression analysis methods, or configure manually")
) #wellPanel
) #column(width = 5,
), # fluidRow
) # fluidRow
) #fluidPage
# Define server logic required to draw a histogram
server <- function(input, output) {
options(shiny.maxRequestSize=30*1024^2)
datasetCount <- eventReactive(input$go, {
inFile <- input$tableCountInp
readCountFile(inFile$datapath, input$sepCharcterInp)
})
output$sample <- DT::renderDataTable({
DT::datatable(datasetCount())
})
# Cria o objeto de diretório
output$selectedFolder <- renderText({
if (!is.null(input$folderInput)) {
paste("Selected folder:", input$folderInput$name)
} else {
"No folder selected."
}
})
}
# Run the application
shiny::shinyApp(ui = ui, server = server)
}
runConsexpressionTestes()
# library(shiny)
# library(shinyFiles)
# library(fs)
runConsexpressionTestes <- function(){
ui <- shiny::fluidPage(
h1("consexpression", span("R", style = "font-weight: 300"),
style = "color: #fff; text-align: center;
background-color:#27296d;
padding: 5%;
margin-bottom: 2%;"),
shiny::fluidRow(
shiny::h2("Configure Experiment", style = "text-align: center;"),
shiny::fluidRow(
shiny::column(width = 1,
),
shiny::column(width = 10,
shiny::wellPanel(shiny::h3("Experiment Design", style="color: #5e63b6;"),
shiny::fluidRow(
shiny::column(width = 6,
shiny::textInput(inputId = "experimentNameInp",
label="Experiment Name",
value="genericExperiment",
placeholder = "genericExperiment"),
),
shiny::column(width = 6,
shiny::numericInput(inputId = "numberReplicsInp",
label="Number of Replics",
value= 1,
min = 1,),
),
shiny::p(shiny::helpText(
"Note: This tool expect the same number of replics in each group of treatment."
)),
),
shiny::textInput(inputId ="groupNameInp",
label="Treatment Names",
placeholder ="Treat1, Treat2"),
shiny::helpText("Note: Comma separeted list by sample treatment names."),
shiny::h3("Table count file", style="color: #5e63b6;"),
# Input: Selector for choosing dataset ----
shiny::fluidRow(
shiny::column(width = 6,
shiny::selectInput(inputId = "sepCharcterInp",
label = "Choose a separator:",
choices = c("Comma-separated"=",","TAB" = "\t")),
),
shiny::column(width = 6,
shiny::fileInput(inputId = "tableCountInp",
label = "Select a table count file",
multiple = FALSE,
accept = c("text/csv/tsv",
"text/comma-separated-values,text/plain",".csv")),
helpText("Note: while the data view will show only the specified", "number of replics, the summary will still be based","on the full dataset."),
)
),
shiny::div( style= "text-align: center;",
shiny::actionButton(inputId = "go",
label = "Load count dataset",
width = '51%',
class= "btn-primary" ),
)
),
),
column(width = 1)
),
shiny::fluidRow(
shiny::column(width = 12,
shiny::h2("Details of data set load", style = "text-align: center;"),
shiny::wellPanel(
DT::dataTableOutput("sample")
)
),
),
shiny::fluidRow(
shiny::column(width = 5,
shiny::h2("Expression analysis parameters", style="text-aligner:center;"),
shiny::p("The consensus methodology of this tool was tested with the parameters shown below."),
shiny::wellPanel(
shiny::h3("DESEq2", style="color: #5e63b6;"),
tags$head(
tags$script(
HTML('
$(document).on("shiny:inputchanged", function(event) {
var inputId = event.name;
var file = event.value;
if (inputId === "kallistoDirRuns") {
var fileList = file.files;
if (fileList.length > 0 && !fileList[0].webkitRelativePath) {
alert("Please, select a folder (directory)!");
$("#" + inputId).val(null);
}
}
});
')
)
),
shiny::selectInput(inputId = "fitTypeInp",
label = "fitType",
choices = c("parametric"="parametric", "local"="local", "mean"="mean", "glmGamPoi"="glmGamPoi"),
selected = "local",
width = NULL
), #selectInput
shiny::fileInput(inputId = "kallistoDirRuns",
label = "Select kallisto root output",
multiple = FALSE,
accept = NULL),
helpText("Note: select any.tsv file (in default mode of kallisto output)"),
shiny::verbatimTextOutput("selectedFolder")
# shiny::fileInput("kallistoDirRuns", "Directory that contais kallisto runs.",)
# pathDirRuns = ".",
# pathReportFile = "report_txi.txt",
# subDirRuns = "dir_runs",
# fileKallisto = "abundance.tsv"
# shiny::helpText("Use the default (selected) settings of the expression analysis methods, or configure manually")
) #wellPanel
) #column(width = 5,
), # fluidRow
) # fluidRow
) #fluidPage
# Define server logic required to draw a histogram
server <- function(input, output) {
options(shiny.maxRequestSize=30*1024^2)
datasetCount <- eventReactive(input$go, {
inFile <- input$tableCountInp
readCountFile(inFile$datapath, input$sepCharcterInp)
})
output$sample <- DT::renderDataTable({
DT::datatable(datasetCount())
})
# Cria o objeto de diretório
output$selectedFolder <- renderText({
if (!is.null(input$folderInput)) {
paste("Selected folder:", input$folderInput$name)
} else {
"No folder selected."
}
})
}
# Run the application
shiny::shinyApp(ui = ui, server = server)
}
runConsexpressionTestes()
load_all()
runConsexpressionTestes()
remotes::install_github("thomasp85/shinyFiles")
# library(shiny)
# library(shinyFiles)
# library(fs)
runConsexpressionTestes <- function(){
ui <- shiny::fluidPage(
h1("consexpression", span("R", style = "font-weight: 300"),
style = "color: #fff; text-align: center;
background-color:#27296d;
padding: 5%;
margin-bottom: 2%;"),
shiny::fluidRow(
shiny::h2("Configure Experiment", style = "text-align: center;"),
shiny::fluidRow(
shiny::column(width = 1,
),
shiny::column(width = 10,
shiny::wellPanel(shiny::h3("Experiment Design", style="color: #5e63b6;"),
shiny::fluidRow(
shiny::column(width = 6,
shiny::textInput(inputId = "experimentNameInp",
label="Experiment Name",
value="genericExperiment",
placeholder = "genericExperiment"),
),
shiny::column(width = 6,
shiny::numericInput(inputId = "numberReplicsInp",
label="Number of Replics",
value= 1,
min = 1,),
),
shiny::p(shiny::helpText(
"Note: This tool expect the same number of replics in each group of treatment."
)),
),
shiny::textInput(inputId ="groupNameInp",
label="Treatment Names",
placeholder ="Treat1, Treat2"),
shiny::helpText("Note: Comma separeted list by sample treatment names."),
shiny::h3("Table count file", style="color: #5e63b6;"),
# Input: Selector for choosing dataset ----
shiny::fluidRow(
shiny::column(width = 6,
shiny::selectInput(inputId = "sepCharcterInp",
label = "Choose a separator:",
choices = c("Comma-separated"=",","TAB" = "\t")),
),
shiny::column(width = 6,
shiny::fileInput(inputId = "tableCountInp",
label = "Select a table count file",
multiple = FALSE,
accept = c("text/csv/tsv",
"text/comma-separated-values,text/plain",".csv")),
helpText("Note: while the data view will show only the specified", "number of replics, the summary will still be based","on the full dataset."),
)
),
shiny::div( style= "text-align: center;",
shiny::actionButton(inputId = "go",
label = "Load count dataset",
width = '51%',
class= "btn-primary" ),
)
),
),
column(width = 1)
),
shiny::fluidRow(
shiny::column(width = 12,
shiny::h2("Details of data set load", style = "text-align: center;"),
shiny::wellPanel(
DT::dataTableOutput("sample")
)
),
),
shiny::fluidRow(
shiny::column(width = 5,
shiny::h2("Expression analysis parameters", style="text-aligner:center;"),
shiny::p("The consensus methodology of this tool was tested with the parameters shown below."),
shiny::wellPanel(
shiny::h3("DESEq2", style="color: #5e63b6;"),
shiny::selectInput(inputId = "fitTypeInp",
label = "fitType",
choices = c("parametric"="parametric", "local"="local", "mean"="mean", "glmGamPoi"="glmGamPoi"),
selected = "local",
width = NULL
), #selectInput
shinyFiles::shinyDirButton("kallistoDirRuns", "Select kallisto root output", title = "Select kallisto output folder"),
helpText("Note: select the folder in default output by kallisto"),
shiny::verbatimTextOutput("selectedFolder")
# shiny::fileInput("kallistoDirRuns", "Directory that contais kallisto runs.",)
# pathDirRuns = ".",
# pathReportFile = "report_txi.txt",
# subDirRuns = "dir_runs",
# fileKallisto = "abundance.tsv"
# shiny::helpText("Use the default (selected) settings of the expression analysis methods, or configure manually")
) #wellPanel
) #column(width = 5,
), # fluidRow
) # fluidRow
) #fluidPage
# Define server logic required to draw a histogram
server <- function(input, output) {
options(shiny.maxRequestSize=30*1024^2)
datasetCount <- eventReactive(input$go, {
inFile <- input$tableCountInp
readCountFile(inFile$datapath, input$sepCharcterInp)
})
output$sample <- DT::renderDataTable({
DT::datatable(datasetCount())
})
# Cria o objeto de diretório
volumes <- getVolumes()
shinyFiles::shinyDirChoose(input, "kallistoDirRuns", roots = volumes, filetypes = NULL)
# Atualiza a saída de texto com a pasta selecionada
output$selectedFolder <- renderText({
parseDirPath(volumes, input$dir)
})
}
# Run the application
shiny::shinyApp(ui = ui, server = server)
}
remove(runConsexpressionTestes())
remove(runConsexpressionTestes
)
load_all()
runConsexpressionTestes()
load_all()
runConsexpressionTestes()
runConsexpressionTestes()
load_all()
runConsexpressionTestes()
runConsexpressionTestes()
load_all()
runConsexpressionTestes()
load_all()
runConsexpressionTestes()
load_all()
runConsexpressionTestes()
load_all()
runConsexpressionTestes()
load_all()
runConsexpressionTestes()
load_all()
runConsexpressionTestes()
load_all()
runConsexpressionTestes()
load_all()
runConsexpressionTestes()
